    <!DOCTYPE html>    <html lang="zh">    <head>        <meta charset="UTF-8">        <meta name="keywords" content=""/>        <meta name="description" content=""/>        <meta http-equiv="X-UA-Compatible" content="IE=edge">        <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">    <meta name="generator" content="Halo unknown"/>        <link rel="shortcut icon" type="images/x-icon" href="https://cdn.jsdelivr.net/gh/ezone2020/pro-spring-security-2e@master/EBlog/2020/11/634176c63aa943fb885615471dbfdd85">                    <title>spring boot自动配置 | Ezone </title>        <script language=javascript>            <!--            window.onerror = function () {                return true;            }            // -->        </script>        <style type="text/css">            :root {                --header-bg-color: #fff;                --header-sub-bg-color: #f0f5f9;                --header-sub-hover-bg-color: #c9d6de;                --header-link-color: #504b4d;                --base-color: #4facfe;                --base-hover-color: #4facfe;                --cd-hover-color: #E53A40;                --btn-pri-bg-color: #E53A40;                --base-hl-color: #E53A40;                /*--btn-pri-bg-color: #ff5f5f;*/                --text-color: #333333;                --text-hover-color: #4facfe;                --toc-bg-color: #8e8787;                /*夜晚默认*/                --night-toc-bg-color: #e5e5e5;                --night-tag-txt-color: #e5e5e5;                --night-tag-bg-color: #555;                --night-link-card-bg-color: rgba(0, 0, 0, .4);                --night-background: #292a2d;                --night-txt-color: #a9a9b3;                --night-input-backgrround: #2d2d2d;                --night-code-txt-color: #c5c8c6;                --night-code-color: #969896;                --night-code-bg-color: #2d2d2d;                --night-code-hljs-string-color: #0857b3;                --night-page-a-color: #fffff;                --monospace: "Lucida Console", Consolas, "Courier", monospace;            }            @media only screen and (min-width: 861px) {                .home-page .bg-cover {                    height: 100vh !important;                }            }        </style>        <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/tailwindcss@1.4.6/dist/tailwind.min.css">        <link rel="stylesheet" href="//cdn.jsdelivr.net/npm/viewerjs@1.5.0/dist/viewer.min.css">        <!-- 相册 -->        <link rel="stylesheet" href="//cdn.jsdelivr.net/npm/lightgallery@1.6.8/dist/css/lightgallery.min.css">        <link rel="stylesheet" href="//cdn.jsdelivr.net/npm/justifiedGallery@3.7.0/dist/css/justifiedGallery.min.css">        <link rel="stylesheet"              href="https://cdn.jsdelivr.net/npm/highlight.js@10.1.2/styles/tomorrow-night-bright.css">            <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.12.0/dist/katex.min.css"                  integrity="sha384-AfEj0r4/OFrOo5t7NnNe46zW/tFgW6x/bCJG8FqQCEo3+Aro6EYUG4+cU+KJWu/X"                  crossorigin="anonymous">            <link rel="stylesheet" href="//cdn.jsdelivr.net/npm/aplayer@1.10.1/dist/APlayer.min.css">        <link href="https://cdn.jsdelivr.net/gh/xzzai/static@master/css/jqcloud.min.css" rel="stylesheet">        <link href="//cdn.jsdelivr.net/npm/social-share.js@1.0.16/dist/css/share.min.css" rel="stylesheet">                <link rel="stylesheet" href="/themes/bao/dist/style.min.css?ver=1,611,824,353,246">        <script type="application/javascript">            <!--            window.onerror = function () {                return true;            }            // -->        </script>    </head>    <body><header class="nav-wrapper -sticky" id="navHeader">    <nav class="nav ">        <button class="toggle-nav">            <div class="burger -squeeze">                <span class="burger-lines"></span>            </div>        </button>                <ul class="nav-list " role="navigation">            <div class="list -left " id="menuLinks">                        <li class="item "                            index="0">                                <a class="link md:text-base sm:text-sm" href="/"                                   target="_self">Home</a>                        </li>                        <li class="item "                            index="1">                                <a class="link md:text-base sm:text-sm" href="/categories.html"                                   target="_self">Categories</a>                        </li>                        <li class="item "                            index="2">                                <a class="link md:text-base sm:text-sm" href="/archives.html"                                   target="_self">Archives</a>                        </li>                        <li class="item "                            index="3">                                <a class="link md:text-base sm:text-sm" href="/s/about.html"                                   target="_self">About</a>                        </li>            </div>            <div class="list -right">                <div class="overlay"></div>            </div>        </ul>            <div class="day-night-mode">                <input id="switch_Word" type="checkbox" class="switch_Word">                <label for="switch_Word"><i></i></label>            </div>    </nav></header>    <main class="mx-auto" id="container">        <header class="bg-cover post-cover" id="postHeader">                <div class="placeholder-bg">                </div>            <div class="cover-content post-cover-content flex justify-center">                <!-- 封面内容 -->                <div class="inner flex flex-col justify-center">                    <p class="post-title cover-title text-base lg:text-4xl xl:text-5xl md:text-3xl">spring boot自动配置</p>                    <div class="post-meta">                        <div class="post-meta-wrap">                            <img class="author-avatar"                                 srcset="https://cdn.jsdelivr.net/gh/ezone2020/pro-spring-security-2e@master/EBlog/2020/11/634176c63aa943fb885615471dbfdd85, https://cdn.jsdelivr.net/gh/ezone2020/pro-spring-security-2e@master/EBlog/2020/11/634176c63aa943fb885615471dbfdd85 2x"                                 src="https://cdn.jsdelivr.net/gh/ezone2020/pro-spring-security-2e@master/EBlog/2020/11/634176c63aa943fb885615471dbfdd85" alt=""/>                            <span class="post-author">29 次访问</span>                            <time class="published"                                  datetime="2021-01-14">2021-01-14</time>                        </div>                        <div class="text-center post-categories">                        </div>                    </div>                </div>            </div>        </header>        <div class="article-content content-container">            <div class="container mx-auto px-4 md-content mt-8 max-w-6xl tracking-wider md:leading-relaxed sm:leading-normal ct-container cn-pd"                 id="write">                <h1 id="spring-boot是怎样实现自动配置的">spring boot是怎样实现自动配置的?</h1><h2 id="intro">Intro</h2><p>spring boot框架的产生,最主要的目的,是为了解决spring框架日益繁复的配置问题.它实现了自动配置,换句话说,自动配置是spring boot最核心的功能.而spring boot是怎样实现自动配置的呢?</p><h2 id="1spring-web-配置方式的演化">1.spring web 配置方式的演化</h2><p>spring web的配置方式,经历了从web.xml, 到annotation config,到java config,最后到现在springboot自动配置的方式.</p><h3 id="11使用webxml方式">1.1使用web.xml方式</h3><p>早期的spring web,使用的是web.xml的方式进行配置的.spring是基于servlet规范的,所以它可以使用规范中xml的方式进行配置.只不过,spring将跟spring容器相关的配置,抽取到单独的xml文件中.</p><ul><li>示例代码<ul><li>源码地址<br /><a href="https://github.com/eadronlin/javaStudy/tree/master/springXmlConfig">https://github.com/eadronlin/javaStudy/tree/master/springXmlConfig</a></li><li>示例</li></ul></li></ul><h3 id="12使用annotation进行改善的方式">1.2使用annotation进行改善的方式</h3><p>Servlet 规范从  <a href="http://download.oracle.com/otn-pub/jcp/servlet-2.5-mr5-oth-JSpec/servlet-2.5-mr5-spec.pdf">2.5版本</a>起,开始支持annotation. spring利用了这个新功能,对spring的配置进行了改善:bean不再需要手动配置到xml中,而是通过注解,就能注册到spring容器中.</p><ul><li>示例代码<ul><li>源码地址<br /><a href="https://github.com/eadronlin/javaStudy/tree/master/springAnnotationConfig">https://github.com/eadronlin/javaStudy/tree/master/springAnnotationConfig</a></li></ul></li></ul><h3 id="13使用java-config方式">1.3使用Java config方式</h3><p><a href="https://download.oracle.com/otn-pub/jcp/servlet-3.0-fr-eval-oth-JSpec/servlet-3_0-final-spec.pdf">servlet 3.0</a>起,servlet 增加了ServletContainerInitializer接口支持使用java代码的方式代替xml配置,从此java web可以完全摆脱xml配置的束缚.而相应的spring增加了WebApplicationInitializer接口(spring基于servlet,因此其具体的做法应该是实现ServletContainerInitializer接口,然后调用WebApplicationInitializer).</p><ul><li>示例代码<ul><li>源码地址<br /><a href="https://github.com/eadronlin/javaStudy/tree/master/springJavaConfig">https://github.com/eadronlin/javaStudy/tree/master/springJavaConfig</a></li></ul></li></ul><h3 id="14spring-boot自动配置方式">1.4spring boot自动配置方式</h3><p>2014年,spring boot发布.它内置了默认配置,使得开发者繁复的配置工作中解脱出来.</p><ul><li>示例代码<ul><li>源码地址<br /><a href="https://github.com/eadronlin/javaStudy/tree/master/springBootAutoConfig">springBootAutoConfig</a></li></ul></li></ul><h2 id="2如果是自己要实现spring-web自动配置要做什么事情">2.如果是自己要实现spring web自动配置,要做什么事情?</h2><p>1.创建servlet context,并注册Dispatcher Servlet<br />2.创建spring context,往spring container 注册bean</p><p>那么在哪做这些事情?ServletContainerInitializer接口、WebApplicationInitializer接口的 onStartup方法,会在servlet容器启动时自动加载并且运行.由此猜想,spring boot要完成自动配置的一些前置工作,切入点应该就在这里,当然,servlet 容器的创建,在onStartup之前.</p><p>WebApplicationInitializer接口<br />annotation,注解在spring boot中主要起什么作用?自动注册bean?<br />spring boot怎么扫描需要自动注册的信息的?<br />定义默认配置,默认配置定义在哪?spring boot怎么使用默认配置的?</p><h3 id="21spring-boot怎么创建servlet-容器的">2.1spring boot怎么创建servlet 容器的?</h3><p>spring boot是可执行程序,虚拟机直接加载其执行起点:main()函数.从main()追踪:<br />SpringApplication.run() -&gt;<br />SpringApplication.createApplicationContext() -&gt;<br />SpringApplication.refresh() -&gt;<br />ServletWebServerApplicationContext.createWebServer()<br />创建servlet容器后,下一步将执行ServletContainerInitializer.onStartup,调用代码:</p><pre><code>StandardContext.startInternal():// Call ServletContainerInitializersfor (Map.Entry&lt;ServletContainerInitializer, Set&lt;Class&lt;?&gt;&gt;&gt; entry :    initializers.entrySet()) {    try {	//        entry.getKey().onStartup(entry.getValue(),                getServletContext());    } catch (ServletException e) {        log.error(sm.getString(&quot;standardContext.sciFail&quot;), e);        ok = false;        break;    }}</code></pre><h3 id="22spring-boot怎么注册-dispatcher-servlet的">2.2spring boot怎么注册 Dispatcher Servlet的?</h3><p>spring boot 是使用内嵌服务器,servlet 容器创建后的执行点</p><ul><li>tomcat<pre><code>ServletWebServerApplicationContext.getWebServerFactory()</code></pre></li></ul><p>//tomcatServletWebServerFactory</p><p>//为什么注册Dispatcher Servlet比 onStarterup先执行?不过也是可以的,因为servlet context 已经创建了.<br />//非内嵌服务器的实现,Dispatcher Servlet是在WebApplicationInitializer.onStartup中注册的<br />@ConditionalOnClass(DispatcherServlet.class)<br />org.springframework.boot.autoconfigure.web.servlet.DispatcherServletAutoConfiguration.dispatcherServlet</p><p>TomcatStarter.onStartup(Set&lt;Class&lt;?&gt;&gt; classes, ServletContext servletContext)</p><pre><code>- 题外:非内嵌服务器      - SpringServletContainerInitializer            SpringServletContainerInitializer实现了ServletContainerInitializer接口HostConfig.manageApp(Context context)-&gt;StandardContext.startInternal() -&gt; SpringServletContainerInitializer.startup(@Nullable Set&lt;Class&lt;?&gt;&gt; webAppInitializerClasses, ServletContext servletContext)      - AbstractDispatcherServletInitializer            ~~AbstractDispatcherServletInitializer是实现WebApplicationInitializer接口的抽象类,其onStartup方法实现如下:</code></pre><p>@Override<br />public void onStartup(ServletContext servletContext) throws ServletException {<br />super.onStartup(servletContext);<br />registerDispatcherServlet(servletContext);<br />}</p><pre><code>这是注册 Dispatcher Servlet 的一个地方调试1中的4种注册方式,只有 java config的方式,会调用到这里.那么其他三种方式,是在哪里注册的?继续调试 java config,查找调用的根源,看能否从源头找出什么线索.找到调用 AbstractDispatcherServletInitializer.onStartup的地方,是在SpringServletContainerInitializer类的onStartup中.SpringServletContainerInitializer实现了ServletContainerInitializer接口.所以故事应该从SpringServletContainerInitializer说起~~### 2.3Spring boot 怎么创建 spring context的?### 2.4spring boot 怎么注册各种bean的?### spring boot 的 ApplicationContext 有什么作用,它与WebApplicationContext什么关系?      org.springframework.boot.web.servlet.context.AnnotationConfigServletWebServerApplicationContext### 主要原理   - @EnableAutoConfiguration         @EnableAutoConfiguration的关键功能是通过@Import注解导入的ImportSelector来完成的。从源代码得知@Import(AutoConfigurationImportSelector.class)是@EnableAutoConfiguration注解的组成部分，也是自动配置功能的核心实现者。@Import(AutoConfigurationImportSele-ctor.class)又可以分为两部分：@Import和对应的ImportSelector。      - @Import   - @Conditional   - @Configuration   - @Bean   - spring-boot-autoconfigure-2.3.1.RELEASE.jar/META-INF/spring.factories   - spring-boot-autoconfigure-2.3.1.RELEASE.jar/META-INF/spring-autoconfigure-metadata.properties   - ServletWebServerFactoryConfiguration         ![](https://thepracticaldeveloper.com/images/posts/uploads/2020/04/auto-configuration.png)## 3.spring boot启动过程### ## 开启spring boot 调试模式## web.xml  WebApplicationInitializer### 1 web.xml是直接由servlet container 实例化的### 接口WebApplicationInitializer，用于替代web.xml配置文件。实现该接口的类会在Servlet容器启动时自动加载并运行。   - xml         ```&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;&lt;web-app xmlns=&quot;http://java.sun.com/xml/ns/javaee&quot;         xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;         xsi:schemaLocation=&quot;http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_3_0.xsd&quot;         version=&quot;3.0&quot;&gt;    &lt;context-param&gt;        &lt;param-name&gt;contextConfigLocation&lt;/param-name&gt;        &lt;param-value&gt;classpath:applicationContext.xml&lt;/param-value&gt;    &lt;/context-param&gt;    &lt;servlet&gt;        &lt;servlet-name&gt;dispatcher&lt;/servlet-name&gt;        &lt;servlet-class&gt;org.springframework.web.servlet.DispatcherServlet&lt;/servlet-class&gt;        &lt;init-param&gt;            &lt;param-name&gt;contextConfigLocation&lt;/param-name&gt;            &lt;param-value&gt;classpath:dispatcher-servlet.xml&lt;/param-value&gt;        &lt;/init-param&gt;        &lt;load-on-startup&gt;1&lt;/load-on-startup&gt;    &lt;/servlet&gt;    &lt;servlet-mapping&gt;        &lt;servlet-name&gt;dispatcher&lt;/servlet-name&gt;        &lt;url-pattern&gt;/&lt;/url-pattern&gt;    &lt;/servlet-mapping&gt;    &lt;listener&gt;        &lt;listener-class&gt;org.springframework.web.context.ContextLoaderListener&lt;/listener-class&gt;    &lt;/listener&gt;&lt;/web-app&gt;```   - 代码直接实现         ```public class MyWebAppInitializer implements WebApplicationInitializer {        /**        * Servlet容器启动时会自动运行该方法        */        @Override        public void onStartup(ServletContext servletContext) throws ServletException {        servletContext.setInitParameter(&quot;contextConfigLocation&quot;, &quot;classpath:applicationContext.xml&quot;);        ServletRegistration.Dynamic registration = servletContext.addServlet(&quot;dispatcher&quot;, new DispatcherServlet());        registration.setLoadOnStartup(1);        registration.addMapping(&quot;/&quot;);        registration.setInitParameter(&quot;contextConfigLocation&quot;, &quot;classpath:dispatcher-servlet.xml&quot;);        servletContext.addListener(new ContextLoaderListener());        }        }```## 各种spring xml 注解### @EnableAutoConfiguration注解   - 源码         ```@Target(ElementType.TYPE)@Retention(RetentionPolicy.RUNTIME)@Documented@Inherited@AutoConfigurationPackage@Import(AutoConfigurationImportSelector.class)public @interface EnableAutoConfiguration {   String ENABLED_OVERRIDE_PROPERTY = &quot;spring.boot.enableautoconfiguration&quot;;   /**    * Exclude specific auto-configuration classes such that they will never be applied.    * @return the classes to exclude    */   Class&lt;?&gt;[] exclude() default {};   /**    * Exclude specific auto-configuration class names such that they will never be    * applied.    * @return the class names to exclude    * @since 1.3.0    */   String[] excludeName() default {};}```   - @Import         ```@Target(ElementType.TYPE)@Retention(RetentionPolicy.RUNTIME)@Documentedpublic @interface Import {   /**    * {@link Configuration @Configuration}, {@link ImportSelector},    * {@link ImportBeanDefinitionRegistrar}, or regular component classes to import.    */   Class&lt;?&gt;[] value();}```      - @Import 提供了和在xml配置文件中的&lt;import/&gt;标签相同的能力。允许我们导入注解了@Configuration的类，或者是实现了ImportSelector或者ImportBeanDefinitionRegistrar接口的实现类。   - @EnableAutoConfiguration上的@Import引入了一个AutoConfigutationImportSelector.class的类。   - AutoConfigurationImportSelector      - AutoConfigurationImportSelector源码## 定义bean的不同方式   https://www.ibm.com/developerworks/cn/webservices/ws-springjava/index.html### xml的方式   - xml文件         ```&lt;beans&gt;    &lt;bean id=&quot;course&quot; class=&quot;demo.Course&quot;&gt;        &lt;property name=&quot;module&quot; ref=&quot;module&quot;/&gt;    &lt;/bean&gt;       &lt;bean id=&quot;module&quot; class=&quot;demo.Module&quot;&gt;        &lt;property name=&quot;assignment&quot; ref=&quot;assignment&quot;/&gt;    &lt;/bean&gt;       &lt;bean id=&quot;assignment&quot; class=&quot;demo.Assignment&quot; /&gt;&lt;/beans&gt;```## 参考资料### http://zetcode.com/articles/springwebfirst/</code></pre>            </div>            <div id="tocFlag"></div>                <aside id="toc" class="toc font-sans"></aside>        </div>        <div class="container mx-auto px-4 mt-8 max-w-6xl tracking-wider md:leading-relaxed sm:leading-normal ct-container cn-pd">            <blockquote class="post-copyright">                <p><b>Copyright: </b> 采用 <a href="https://creativecommons.org/licenses/by/4.0/" target="_blank"                                            rel="external nofollow">知识共享署名4.0</a> 国际许可协议进行许可</p>                <p><b>Links: </b> <a href="/archives/s-p-r-i-n-g--b-o-o-t-zi-dong-pei-zhi.html">/archives/s-p-r-i-n-g--b-o-o-t-zi-dong-pei-zhi.html</a></p>            </blockquote>        </div>        <div class="container mx-auto px-4 mt-8 pb-4 max-w-6xl tracking-wider md:leading-relaxed sm:leading-normal ct-container cn-pd coffee-tags">                <p class="flex flex-col justify-center pt-8 pb-8">                    <span class="text-center block pb-2">Buy me a cup of coffee ☕.</span>                    <button id="buyCoffee"                            class="btn-primary rounded h-10 leading-10 w-32 mg-auto">                        <img src="/themes/bao/source/images/cuplogo-sm.png" style="height: 13px"/>                        <span class="pt-1 pl-2">Coffee</span>                    </button>                </p>            <p class="flex flex-row justify-start flex-wrap">            </p>            <hr class="mt-4" style="background-color: rgba(96, 125, 139, .05); size: 2px;">        </div>        <!-- 上一篇和下一篇 -->            <div class="container mx-auto mt-8 pb-8 max-w-6xl grid grid-cols-2 flex flex-row justify-between  ct-container cn-pd post-navigation">                <div class="pre-post pt-4 ">                </div>                <div class="next-post pt-4 text-right">                </div>            </div>        <div class="container mx-auto px-4 mt-16 max-w-6xl tracking-wider md:leading-relaxed sm:leading-normal ct-container cn-pd">        <script src="//cdn.jsdelivr.net/npm/vue@2.6.10/dist/vue.min.js"></script>        <script src="//cdn.jsdelivr.net/npm/halo-comment@latest/dist/halo-comment.min.js"></script>        <section class="comments-area">            <div class="inner" id="commentInner">                <div id="haloComment"></div>            </div>        </section>        <script type="application/javascript" data-pjax-comment>            function getLocalStorage(key) {                var exp = 60 * 60 * 1000; // 一个小时的秒数                if (localStorage.getItem(key)) {                    var vals = localStorage.getItem(key); // 获取本地存储的值                    var dataObj = JSON.parse(vals); // 将字符串转换成JSON对象                    // 如果(当前时间 - 存储的元素在创建时候设置的时间) > 过期时间                    var isTimed = (new Date().getTime() - dataObj.timer) > exp;                    if (isTimed) {                        console.log("存储已过期");                        localStorage.removeItem(key);                        return null;                    } else {                        var newValue = dataObj.val;                    }                    return newValue;                } else {                    return null;                }            }            function renderComment() {                var  haloComment = document.getElementById('haloComment');                if (!haloComment) {                    $('#' + '6').remove();                    $('#commentInner').append('<div id="haloComment"></div>');                }                new Vue({                    el: '#haloComment',                    data() {                        return {                            configs: {                                darkMode: getLocalStorage('nightMode')                            }                        };                    },                    template: `<halo-comment id="6" type="post" :configs="JSON.stringify(configs)" />`,                });            }            renderComment();        </script>        </div>    </main><div class="moon-menu">    <div class="moon-menu-items" id="moonMenu">        <span class="moon-menu-item pl-6 cst-icon icon-up"> </span>        <span class="moon-menu-item pl-6 cst-icon icon-down"> </span>        <span class="moon-menu-item pl-6 cst-icon icon-search" id="toggleSearch"></span>                    <span class="moon-menu-item pl-6 cst-icon icon-toc"></span>    </div>    <div class="moon-menu-button">        <svg class="moon-menu-bg">            <circle class="moon-menu-cricle" cx="50%" cy="50%" r="44%"></circle>            <circle class="moon-menu-border" cx="50%" cy="50%" r="48%"></circle>            <g class="moon-dot">                <circle r=".2rem" cx="0" cy="-.8rem"></circle>                <circle r=".2rem"></circle>                <circle r=".2rem" cx="0" cy=".8rem"></circle>            </g>        </svg>        <div class="moon-menu-content">            <div class="moon-menu-icon"></div>            <div class="moon-menu-text"></div>        </div>    </div></div><div class="moon-content menu-bg" id="moonToc"></div><form method="get" action="/search">    <div class="hidden search-box" id="searchBox">        <div class="search-ipt ipt ipt-w">            <div class="ipt-ct ct-bg search-container" id="searchInput">                <label class="sh-lab">                    <input class="sh-ipt" maxlength="30" name="keyword" id="searchBoxInput" spellcheck="false" placeholder="Search" autocomplete="off">                    <i class="sh-icon cst-icon icon-search"></i>                </label>                <a class="sh-exit cst-icon icon-exit"></a>            </div>        </div>    </div></form><footer class="footer mt-8">    <div class="inner container mx-auto flex flex-row lg:justify-between  md:justify-center items-center grid lg:grid-cols-2 md:grid-cols-1">                <div class="offsite-links flex flex-row justify-center flex-wrap">                <a href="/atom.xml" class="circle pad-10" target="_blank" rel="noopener" title="RSS">                    <span class="cst-icon icon-feed"> </span>                </a>        </div>        <div class="site-info flex flex-col justify-center">    this world is awful,this life has to be awesome!                <div class="badges">                <div class="github-badge">                    <a style="color: #fff" rel="license" href="#" target="_blank">                        <span class="badge-subject bg-orange">purpose,</span>                        <span class="badge-middle bg-brightgreen">freedom&</span>                        <span class="badge-value bg-red">love</span>                    </a>                </div>            </div>        </div>    </div></footer>    <meting-js            server="netease"            type="playlist"            fixed="fasle"            id="5315397969">    </meting-js>    </body>    <script src="//cdn.jsdelivr.net/npm/jquery@3.2.1/dist/jquery.min.js"></script>        <script type="text/javascript">            var autoNightModeOpen = true;        </script>    <script src="/themes/bao/source/js/_plugins/utils.js?ver=2020008042122"></script>    <script src="/themes/bao/source/js/_plugins/modal.js?ver=2020008042122"></script>    <script src="/themes/bao/source/js/_plugins/night-mode.js?ver=2020008042122"></script>    <!-- 右下角按钮-->    <script src="/themes/bao/source/js/_plugins/moon-menu.js?ver=2020008092122"></script>    <script src="/themes/bao/source/js/gallery.js?ver=2020008042122"></script>    <script src="/themes/bao/source/js/post.js??ver=2020008112122"></script>    <script src="/themes/bao/source/js/_plugins/header.js?ver=2020008112122"></script><script src="//cdn.jsdelivr.net/npm/vue@2.6.10/dist/vue.min.js"></script><script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script><script src="//cdn.jsdelivr.net/gh/highlightjs/cdn-release@10.0.0/build/highlight.min.js"></script><script src="//cdn.jsdelivr.net/gh/xzzai/static@master/js/highlight.lang.js"></script><script src="//cdn.jsdelivr.net/npm/highlightjs-line-numbers.js@2.7.0/dist/highlightjs-line-numbers.min.js"></script><script src="https://cdn.jsdelivr.net/gh/xzzai/highlightjs-copy-button@master/dist/highlightjs-copy-button.min.js"></script><!--图片预览插件--><script data-pjax-viewer src="//cdn.jsdelivr.net/npm/viewerjs@1.5.0/dist/viewer.min.js"></script><script src="https://cdn.jsdelivr.net/npm/micromodal/dist/micromodal.min.js"></script><script src="//cdn.jsdelivr.net/npm/justifiedGallery@3.7.0/dist/js/jquery.justifiedGallery.min.js"></script><script src="https://cdn.jsdelivr.net/gh/xzzai/static@master/js/simply-nav.js"></script><script src="https://cdn.jsdelivr.net/gh/xzzai/static@master/js/moon.js"></script><script src="//cdn.jsdelivr.net/npm/social-share.js@1.0.16/dist/js/social-share.min.js"></script><script src="https://cdn.jsdelivr.net/gh/xzzai/static@master/js/jqcloud-1.0.4.min.js"></script><script type='text/javascript'>    // 标签    var tagArray = [        {'text': 'SpringBoot', 'weight': '0', 'link': '/tags/springboot.html'},        {'text': 'java', 'weight': '0', 'link': '/tags/java.html'},    ];    // 分类    var categoryArray = [        {'text': 'Tools', 'weight': '0', 'link': '/categories/tools.html'},        {'text': 'SpringCloud', 'weight': '0', 'link': '/categories/springcloud.html'},        {'text': 'JavaEE', 'weight': '0', 'link': '/categories/javaee.html'},        {'text': 'Spring', 'weight': '0', 'link': '/categories/spring.html'},        {'text': 'SpringBoot', 'weight': '0', 'link': '/categories/springboot.html'},        {'text': 'Java', 'weight': '0', 'link': '/categories/java.html'},    ];    $(function () {        var tagCloud = $("#tagCloud");        if (tagCloud && tagCloud.children().length === 0) {            tagCloud.jQCloud(tagArray, {autoResize: true, delayedMode: true});        }        var categoryCloud = $("#categoryCloud");        if (categoryCloud && categoryCloud.children().length === 0) {            categoryCloud.jQCloud(categoryArray, {autoResize: true, delayedMode: true});        }    });</script>    <script src="//cdn.jsdelivr.net/npm/tocbot@4.11.2/dist/tocbot.min.js"></script>    <script src="//cdn.jsdelivr.net/npm/aplayer@1.10.1/dist/APlayer.min.js"></script>    <script src="//cdn.jsdelivr.net/npm/meting@2/dist/Meting.min.js"></script><script type="text/javascript">    $('.arrow-down').on('click', function () {        var postHeight = $('#homeHeader').height();        window.scroll({top: postHeight - 50, behavior: 'smooth'});    })    // 禁用的分享站点, 现在已经不支持腾讯微博    var socialDisabled = 'google,twitter,facebook';</script><script type="text/javascript">    var katex_config = {        delimiters:            [                {left: "$$", right: "$$", display: true},                {left: "$", right: "$", display: false},                {left: "\\(", right: "\\)", display: false},                {left: "\\[", right: "\\]", display: true},            ]    };    var openToc = false;        openToc = true;</script>    <script defer src="https://cdn.jsdelivr.net/npm/katex@0.12.0/dist/katex.min.js" integrity="sha384-g7c+Jr9ZivxKLnZTDUhnkOnsh30B4H0rpLUpJ4jAIKs4fnJI+sEnkvrMWph2EDg4" crossorigin="anonymous"></script>    <script defer src="https://cdn.jsdelivr.net/npm/katex@0.12.0/dist/contrib/auto-render.min.js" integrity="sha384-mll67QQFJfxn0IYznZYonOWZ644AWYC+Pt2cHqMaRhXVrursRwvLnLaebdGIlYNa" crossorigin="anonymous"            onload="if (document.getElementById('write'))            { renderMathInElement(document.getElementById('write'), katex_config)}            else if (document.getElementById('tree-hole'))            {renderMathInElement(document.getElementById('tree-hole'), katex_config)}"></script><div class="modal micromodal-slide" id="coffeeModal" aria-hidden="true" role="dialog">    <div class="modal__overlay model_bg" tabindex="-1" data-micromodal-close="">        <div class="modal__container" role="dialog" aria-modal="true" id="modalContainer"             aria-labelledby="modal-1-title">            <header class="modal__header">                <h2 class="modal__title" id="coffeeModalTitle"></h2>                <button class="modal__close" aria-label="Close modal" id="closeCoffeeModalBtn"></button>            </header>            <div class="modal__content flex flex-row justify-center" id="coffeeModalContent">                    <div id='qrCodeZfb' class="pay-code-invisible" code-data="支付宝">                        <img class="qr_code_zfb qr-code" src="https://cdn.jsdelivr.net/gh/ezone2020/pro-spring-security-2e@master/EBlog/2020/11/5288a583500b4db4bcef059e7ad216e6" alt="AliPay"/>                    </div>                    <div id="qrCodeWx" class="pay-code-invisible" code-data="微信支付">                        <img class="qr_code_wx qr-code" src="https://cdn.jsdelivr.net/gh/ezone2020/pro-spring-security-2e@master/EBlog/2020/11/bb9da2786325439c88b5a09eec7d76f2" alt="WeiXinPay"/>                    </div>            </div>            <footer class="modal__footer flex flex-row justify-center">                    <button class="modal__btn zfb-btn code-btn" id="zfbBtn">支付宝</button>                    <button class="modal__btn wx-btn code-btn" id="wxBtn">微信</button>            </footer>        </div>    </div></div>    <script src="https://cdn.jsdelivr.net/npm/pjax@0.2.8/pjax.js"></script>    <script src="https://cdn.jsdelivr.net/npm/nprogress@0.2.0/nprogress.min.js"></script>    <link rel="stylesheet" href="//cdn.jsdelivr.net/npm/nprogress@0.2.0/nprogress.min.css">    <script type="text/javascript">        var pjax = new Pjax({            elements: 'a[href]:not([href^="#"]):not([data-not-pjax]):not([target^="_blank"]), form', // default is "a[href], form[action]"            cacheBust: false,            debug: false,            selectors: [                'title',                '#container'            ]        });        //在Pjax请求开始后触发        document.addEventListener('pjax:send', function () {            NProgress.start();        });        //在Pjax请求完成后触发        document.addEventListener('pjax:complete', function (e) {            NProgress.done();            // 最开始就要隐藏            header.hideSubMenu();            // header            // header.hoverSubMenu();            // 加载相册            if ($("#container").find('.photos-page').length > 0) {                photo.loadGallery();                photo.showPhotos();            }            // 隐藏 search box 并清空 input            $('#searchBox').addClass('hidden');            $("#searchBoxInput").val("");            // 标签云            var tagCloud = $("#tagCloud");            if (tagCloud && tagCloud.children().length === 0) {                tagCloud.jQCloud(tagArray, {autoResize: true, delayedMode: true});            }            // 分类云            var categoryCloud = $("#categoryCloud");            if (categoryCloud && categoryCloud.children().length === 0) {                categoryCloud.jQCloud(categoryArray, {autoResize: true, delayedMode: true});            }            // 当前菜单菜单高亮            hanUtils.highlightMenu();            //重载            if (typeof _hmt !== 'undefined') {                // support 百度统计                _hmt.push(['_trackPageview', location.pathname + location.search]);            }            if (typeof ga !== 'undefined') {                // support google analytics                ga('send', 'pageview', location.pathname + location.search);            }            // 重新加载 评论            $('script[data-pjax-comment]').each(function () {                var commentParent = $(this).parent()                var comment = $(this).remove();                commentParent.append(comment);            });            $('.icon-toc').each(function () {                $(this).remove();            });            $('#moonToc').removeClass('mm-active');            if ($("#container").find('.article-content').length > 0) {                // 转换post内容为 Markdown                // post.formatContent();                // 小屏幕目录                $('#moonMenu').append('<span class="moon-menu-item pl-6 cst-icon icon-toc"></span>')                moonMenu.initMoonToc();                moonMenu.ckShowContent();                // 代码高亮                post.loadHighlight();                // 图片预览                post.initViewer();                if (openToc) {                    // 目录事件                    post.scrollTocFixed();                    // 初始化toc                    post.initToc()                    // 删除文章最开始第一个 <ul>(如果有)                    post.removeFirstUL()                }                // 分享按钮                post.shareIcon()                // 模态框                coffeeModal.toggleCoffeeModal();                // 初始展示二维码                coffeeModal.initShowCode();                // 切换支付二维码                coffeeModal.switchQrCode();                try {                    if (renderMathInElement && typeof renderMathInElement !== 'undefined') {                        renderMathInElement(document.getElementById('write'), katex_config);                    }                    // if (mermaid && typeof mermaid !== 'undefined') {                    //     mermaid.initialize();                    // }                } catch (e) {                    console.log("error");                }            }            // table 要加上 div 避免出现小屏幕下展示不全            hanUtils.tableAddNode();            // li 添加 span            hanUtils.liAddSpan();            // 自定义页面 viewer            hanUtils.sheetViewer();            // 相册页面 viewer            hanUtils.journalViewer();            if (renderMathInElement && typeof renderMathInElement !== 'undefined') {                if (document.getElementById('write')) {                    renderMathInElement(document.getElementById('write'), katex_config)                } else if (document.getElementById('tree-hole')) {                    renderMathInElement(document.getElementById('tree-hole'), katex_config)                }            }        });        document.addEventListener('pjax:end', function () {        });        //Pjax请求失败后触发，请求对象将作为一起传递event.options.request        document.addEventListener('pjax:error', function () {            NProgress.done();            bar('系统出现问题，请手动刷新一次', '3000');        });    </script>    </html>